<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PyScript quick user guide &#8212; Flexx 1.0 ドキュメント</title>
    
    <link rel="stylesheet" href="../static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../static/translations.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="top" title="Flexx 1.0 ドキュメント" href="../index.html" />
    <link rel="up" title="Reference for flexx.pyscript" href="index.html" />
    <link rel="next" title="PyScript examples" href="examples.html" />
    <link rel="prev" title="PyScript API" href="api.html" />
   
  <link rel="stylesheet" href="../static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pyscript-quick-user-guide">
<h1>PyScript quick user guide<a class="headerlink" href="#pyscript-quick-user-guide" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>This guide demonstrates the features that PyScript supports and how it
maps to JavaScript. In most cases you can just read what is
<a class="reference internal" href="intro.html#pyscript-support"><span class="std std-ref">not supported</span></a> and the
<a class="reference internal" href="intro.html#pyscript-caveats"><span class="std std-ref">caveats</span></a> and start coding.</p>
<span class="target" id="module-flexx.pyscript.parser1"></span><div class="section" id="the-basics">
<h2>The basics<a class="headerlink" href="#the-basics" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Most types just work, common Python names are converted to their JavaScript
equivalents.</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Simple operations</span>
<span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">-</span><span class="mi">1</span>
<span class="mi">3</span> <span class="o">*</span> <span class="mi">7</span> <span class="o">/</span> <span class="mi">9</span>
<span class="mi">5</span><span class="o">**</span><span class="mi">2</span>
<span class="nb">pow</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="mi">7</span> <span class="o">//</span> <span class="mi">2</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_pow</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">;</span>
<span class="p">(</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="mi">7</span><span class="p">)</span> <span class="o">/</span> <span class="mi">9</span><span class="p">;</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">_pyfunc_pow</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="mi">7</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Basic types</span>
<span class="p">[</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">None</span><span class="p">]</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">null</span><span class="p">];</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Lists and dicts</span>
<span class="n">foo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">bar</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">bar</span><span class="p">,</span> <span class="nx">foo</span><span class="p">;</span>
<span class="nx">foo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
<span class="nx">bar</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="mi">2</span><span class="p">};</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="slicing-and-subscriping">
<h2>Slicing and subscriping<a class="headerlink" href="#slicing-and-subscriping" title="このヘッドラインへのパーマリンク">¶</a></h2>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Slicing lists</span>
<span class="n">foo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">foo</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
<span class="n">foo</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>
<span class="nx">foo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
<span class="nx">foo</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="nx">foo</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Slicing strings</span>
<span class="n">bar</span> <span class="o">=</span> <span class="s1">&#39;abcdefghij&#39;</span>
<span class="n">bar</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
<span class="n">bar</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">bar</span><span class="p">;</span>
<span class="nx">bar</span> <span class="o">=</span> <span class="s2">&quot;abcdefghij&quot;</span><span class="p">;</span>
<span class="nx">bar</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="nx">bar</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Subscripting</span>
<span class="n">foo</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">foo</span><span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">]</span>
<span class="n">foo</span><span class="o">.</span><span class="n">bar</span>  <span class="c1"># Works in JS, but not in Python</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>
<span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bar&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">};</span>
<span class="nx">foo</span><span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">];</span>
<span class="nx">foo</span><span class="p">.</span><span class="nx">bar</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="string-formatting">
<h2>String formatting<a class="headerlink" href="#string-formatting" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Basic string formatting is supported for &#8220;%s&#8221;, &#8220;%f&#8221;, and &#8220;%i&#8221;.</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="s2">&quot;value: </span><span class="si">%f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">val</span>
<span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: </span><span class="si">%f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="s2">&quot;value: &quot;</span> <span class="o">+</span> <span class="nx">val</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nx">val</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="assignments">
<h2>Assignments<a class="headerlink" href="#assignments" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Declaration of variables is handled automatically. Also support for
tuple packing and unpacking (a.k.a. destructuring assignment).</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Declare foo</span>
<span class="n">foo</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>
<span class="nx">foo</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># But not here</span>
<span class="n">bar</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nx">bar</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Pack items in an array</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">a</span><span class="p">;</span>
<span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># And unpack them</span>
<span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">,</span> <span class="n">a3</span> <span class="o">=</span> <span class="n">a</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">a1</span><span class="p">,</span> <span class="nx">a2</span><span class="p">,</span> <span class="nx">a3</span><span class="p">,</span> <span class="nx">stub1_</span><span class="p">;</span>
<span class="nx">stub1_</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
<span class="nx">a1</span> <span class="o">=</span> <span class="nx">stub1_</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="nx">a2</span> <span class="o">=</span> <span class="nx">stub1_</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="nx">a3</span> <span class="o">=</span> <span class="nx">stub1_</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Deleting variables</span>
<span class="k">del</span> <span class="n">bar</span><span class="o">.</span><span class="n">foo</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">delete</span> <span class="nx">bar</span><span class="p">.</span><span class="nx">foo</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Functions starting with a capital letter</span>
<span class="c1"># are assumed constructors</span>
<span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>
<span class="nx">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">();</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="comparisons">
<h2>Comparisons<a class="headerlink" href="#comparisons" title="このヘッドラインへのパーマリンク">¶</a></h2>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Identity</span>
<span class="n">foo</span> <span class="ow">is</span> <span class="n">bar</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nx">foo</span> <span class="o">===</span> <span class="nx">bar</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Equality</span>
<span class="n">foo</span> <span class="o">==</span> <span class="n">bar</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_op_equals</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">op_equals</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">b</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">iseq</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span><span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">;}</span>
        <span class="k">return</span> <span class="nx">iseq</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Object</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">akeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="nx">bkeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
        <span class="nx">akeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span> <span class="nx">bkeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">akeys</span><span class="p">,</span> <span class="nx">bkeys</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">iseq</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">akeys</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
            <span class="p">{</span><span class="nx">k</span><span class="o">=</span><span class="nx">akeys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">k</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">k</span><span class="p">]);</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">;}</span>
        <span class="k">return</span> <span class="nx">iseq</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">_pyfunc_op_equals</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># But comparisons are deep (unlike JS)</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)]</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_op_contains</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">op_contains</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">b</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="k">if</span> <span class="p">(</span><span class="nx">_pyfunc_op_equals</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span>
                                           <span class="k">return</span> <span class="kc">true</span><span class="p">;}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span><span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">k</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">==</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span> <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Not a container: &#39;</span> <span class="o">+</span> <span class="nx">b</span><span class="p">);</span> <span class="nx">e</span><span class="p">.</span><span class="nx">name</span><span class="o">=</span><span class="s1">&#39;TypeError&#39;</span><span class="p">;</span> <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_op_equals</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">op_equals</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">b</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">iseq</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span><span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">;}</span>
        <span class="k">return</span> <span class="nx">iseq</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Object</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">akeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="nx">bkeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
        <span class="nx">akeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span> <span class="nx">bkeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">akeys</span><span class="p">,</span> <span class="nx">bkeys</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">iseq</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">akeys</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
            <span class="p">{</span><span class="nx">k</span><span class="o">=</span><span class="nx">akeys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">k</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">k</span><span class="p">]);</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">;}</span>
        <span class="k">return</span> <span class="nx">iseq</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">_pyfunc_op_equals</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>
<span class="nx">_pyfunc_op_contains</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]));</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Test for null</span>
<span class="n">foo</span> <span class="ow">is</span> <span class="bp">None</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nx">foo</span> <span class="o">===</span> <span class="kc">null</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Test for JS undefined</span>
<span class="n">foo</span> <span class="ow">is</span> <span class="n">undefined</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nx">foo</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Testing for containment</span>
<span class="s2">&quot;foo&quot;</span> <span class="ow">in</span> <span class="s2">&quot;this has foo in it&quot;</span>
<span class="mi">3</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_op_contains</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">op_contains</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">b</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="k">if</span> <span class="p">(</span><span class="nx">_pyfunc_op_equals</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span>
                                           <span class="k">return</span> <span class="kc">true</span><span class="p">;}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span><span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">k</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">==</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span> <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Not a container: &#39;</span> <span class="o">+</span> <span class="nx">b</span><span class="p">);</span> <span class="nx">e</span><span class="p">.</span><span class="nx">name</span><span class="o">=</span><span class="s1">&#39;TypeError&#39;</span><span class="p">;</span> <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_op_equals</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">op_equals</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">b</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">iseq</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span><span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">;}</span>
        <span class="k">return</span> <span class="nx">iseq</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Object</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">akeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="nx">bkeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
        <span class="nx">akeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span> <span class="nx">bkeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">akeys</span><span class="p">,</span> <span class="nx">bkeys</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">iseq</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">akeys</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
            <span class="p">{</span><span class="nx">k</span><span class="o">=</span><span class="nx">akeys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">k</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">k</span><span class="p">]);</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">;}</span>
        <span class="k">return</span> <span class="nx">iseq</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">_pyfunc_op_contains</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;this has foo in it&quot;</span><span class="p">);</span>
<span class="nx">_pyfunc_op_contains</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="truthy-and-falsy">
<h2>Truthy and Falsy<a class="headerlink" href="#truthy-and-falsy" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>In JavaScript, an empty array and an empty dict are interpreted as
truthy. PyScript fixes this, so that you can do <code class="docutils literal"><span class="pre">if</span> <span class="pre">an_array:</span></code> as
usual.</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># These evaluate to False:</span>
<span class="mi">0</span>
<span class="n">NaN</span>
<span class="s2">&quot;&quot;</span>  <span class="c1"># empty string</span>
<span class="bp">None</span>  <span class="c1"># JS null</span>
<span class="n">undefined</span>
<span class="p">[]</span>
<span class="p">{}</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="mi">0</span><span class="p">;</span>
<span class="kc">NaN</span><span class="p">;</span>
<span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="kc">null</span><span class="p">;</span>
<span class="kc">undefined</span><span class="p">;</span>
<span class="p">[];</span>
<span class="p">{};</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># This still works</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="ow">or</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># a is now [1]</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_truthy</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">v</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">byteLength</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">byteLength</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">!==</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="kc">true</span><span class="p">;}</span>
    <span class="k">else</span> <span class="p">{</span><span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">v</span><span class="p">).</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">a</span><span class="p">;</span>
<span class="nx">a</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">a</span> <span class="o">=</span> <span class="nx">_pyfunc_truthy</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">||</span> <span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="function-calls">
<h2>Function calls<a class="headerlink" href="#function-calls" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>As in Python, the default return value of a function is <code class="docutils literal"><span class="pre">None</span></code> (i.e.
<code class="docutils literal"><span class="pre">null</span></code> in JS).</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Business as usual</span>
<span class="n">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nx">foo</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Support for star args (but not **kwargs)</span>
<span class="n">foo</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nx">foo</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">a</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="imports">
<h2>Imports<a class="headerlink" href="#imports" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Imports are not supported syntax in PyScript. Imports &#8220;from pyscript&#8221;
and &#8220;from __future__&#8221; are ignored to help writing hybrid Python/JS
modules.</p>
<p>PyScript does provide functionality to package code in JS modules,
but these follow the <code class="docutils literal"><span class="pre">require</span></code> pattern.</p>
</div>
<span class="target" id="module-flexx.pyscript.parser2"></span><div class="section" id="if-statements">
<h2>If statements<a class="headerlink" href="#if-statements" title="このヘッドラインへのパーマリンク">¶</a></h2>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">if</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">42</span>
<span class="k">elif</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_truthy</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">v</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">byteLength</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">byteLength</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">!==</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="kc">true</span><span class="p">;}</span>
    <span class="k">else</span> <span class="p">{</span><span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">v</span><span class="p">).</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">result</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">_pyfunc_truthy</span><span class="p">(</span><span class="nx">val</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">result</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">_pyfunc_truthy</span><span class="p">(</span><span class="nx">val</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">result</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># One-line if</span>
<span class="n">result</span> <span class="o">=</span> <span class="mi">42</span> <span class="k">if</span> <span class="n">truth</span> <span class="k">else</span> <span class="mi">0</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_truthy</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">v</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">byteLength</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">byteLength</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">!==</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="kc">true</span><span class="p">;}</span>
    <span class="k">else</span> <span class="p">{</span><span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">v</span><span class="p">).</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">result</span><span class="p">;</span>
<span class="nx">result</span> <span class="o">=</span> <span class="p">(</span><span class="nx">_pyfunc_truthy</span><span class="p">(</span><span class="nx">truth</span><span class="p">))</span><span class="o">?</span> <span class="p">(</span><span class="mi">42</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="looping">
<h2>Looping<a class="headerlink" href="#looping" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>There is support for while loops and for-loops in several forms.
Both support <code class="docutils literal"><span class="pre">continue</span></code>, <code class="docutils literal"><span class="pre">break</span></code> and the <code class="docutils literal"><span class="pre">else</span></code> clause.</p>
<p>While loops map well to JS</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="n">val</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="n">val</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_op_add</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">val</span><span class="p">;</span>
<span class="nx">val</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">val</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">val</span><span class="o">=</span><span class="nx">_pyfunc_op_add</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr></table><p>Explicit iterating over arrays (and strings):</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Using range() yields true for-loops</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_range</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="p">(</span><span class="nx">end</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="nx">step</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="nx">val</span> <span class="o">+=</span> <span class="nx">step</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_range</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="p">(</span><span class="nx">end</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="nx">step</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="nx">val</span> <span class="o">+=</span> <span class="nx">step</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># One way to iterate over an array</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_range</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="p">(</span><span class="nx">end</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="nx">step</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="nx">val</span> <span class="o">+=</span> <span class="nx">step</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># But this is equally valid (and fast)</span>
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">stub1_seq</span><span class="p">,</span> <span class="nx">stub2_itr</span><span class="p">;</span>
<span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">;</span>
<span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">stub1_seq</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">)))</span> <span class="p">{</span>
    <span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">stub2_itr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">&lt;</span> <span class="nx">stub1_seq</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">element</span> <span class="o">=</span> <span class="nx">stub1_seq</span><span class="p">[</span><span class="nx">stub2_itr</span><span class="p">];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr></table><p>Iterations over dicts:</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Plain iteration over a dict has a minor overhead</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">stub1_seq</span><span class="p">,</span> <span class="nx">stub2_itr</span><span class="p">;</span>
<span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nx">d</span><span class="p">;</span>
<span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">stub1_seq</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">)))</span> <span class="p">{</span>
    <span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">stub2_itr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">&lt;</span> <span class="nx">stub1_seq</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">key</span> <span class="o">=</span> <span class="nx">stub1_seq</span><span class="p">[</span><span class="nx">stub2_itr</span><span class="p">];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Which is why we recommend using keys(), values(), or items()</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">stub1_seq</span><span class="p">;</span>
<span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nx">d</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">stub1_seq</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">stub1_seq</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">)){</span> <span class="k">continue</span><span class="p">;</span> <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">stub1_seq</span><span class="p">,</span> <span class="nx">val</span><span class="p">;</span>
<span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nx">d</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">val</span> <span class="k">in</span> <span class="nx">stub1_seq</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">stub1_seq</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">val</span><span class="p">)){</span> <span class="k">continue</span><span class="p">;</span> <span class="p">}</span>
    <span class="nx">val</span> <span class="o">=</span> <span class="nx">stub1_seq</span><span class="p">[</span><span class="nx">val</span><span class="p">];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;: &#39;</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">stub1_seq</span><span class="p">,</span> <span class="nx">val</span><span class="p">;</span>
<span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nx">d</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">stub1_seq</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">stub1_seq</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">)){</span> <span class="k">continue</span><span class="p">;</span> <span class="p">}</span>
    <span class="nx">val</span> <span class="o">=</span> <span class="nx">stub1_seq</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">key</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nx">val</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr></table><p>We can iterate over anything:</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Strings</span>
<span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="s2">&quot;foo bar&quot;</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="kr">char</span><span class="p">,</span> <span class="nx">stub1_seq</span><span class="p">,</span> <span class="nx">stub2_itr</span><span class="p">;</span>
<span class="nx">stub1_seq</span> <span class="o">=</span> <span class="s2">&quot;foo bar&quot;</span><span class="p">;</span>
<span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">stub1_seq</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">)))</span> <span class="p">{</span>
    <span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">stub2_itr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">&lt;</span> <span class="nx">stub1_seq</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">char</span> <span class="o">=</span> <span class="nx">stub1_seq</span><span class="p">[</span><span class="nx">stub2_itr</span><span class="p">];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># More complex data structes</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_op_add</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">stub1_seq</span><span class="p">,</span> <span class="nx">stub2_itr</span><span class="p">,</span> <span class="nx">stub3_tgt</span><span class="p">;</span>
<span class="nx">stub1_seq</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]];</span>
<span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">stub1_seq</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">)))</span> <span class="p">{</span>
    <span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">stub2_itr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">&lt;</span> <span class="nx">stub1_seq</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">stub3_tgt</span> <span class="o">=</span> <span class="nx">stub1_seq</span><span class="p">[</span><span class="nx">stub2_itr</span><span class="p">];</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="nx">stub3_tgt</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">stub3_tgt</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">_pyfunc_op_add</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr></table><p>Buildin functions intended for iterations are supported too:
enumerate, zip, reversed, sorted, filter, map.</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">foo</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_enumerate</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">iter</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1</span>
    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">res</span><span class="o">=</span><span class="p">[];</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter</span><span class="p">);}</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">iter</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">i</span><span class="p">,</span> <span class="nx">iter</span><span class="p">[</span><span class="nx">i</span><span class="p">]]);}</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">stub1_seq</span><span class="p">,</span> <span class="nx">stub2_itr</span><span class="p">,</span> <span class="nx">stub3_tgt</span><span class="p">,</span> <span class="nx">x</span><span class="p">;</span>
<span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nx">_pyfunc_enumerate</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
<span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">stub1_seq</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">)))</span> <span class="p">{</span>
    <span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">stub2_itr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">&lt;</span> <span class="nx">stub1_seq</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">stub3_tgt</span> <span class="o">=</span> <span class="nx">stub1_seq</span><span class="p">[</span><span class="nx">stub2_itr</span><span class="p">];</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="nx">stub3_tgt</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">stub3_tgt</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_zip</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="c1">// nargs: 2 3 4 5 6 7 8 9</span>
    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">tup</span><span class="p">,</span> <span class="nx">arg</span><span class="p">,</span> <span class="nx">args</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">len</span> <span class="o">=</span> <span class="mi">1</span><span class="nx">e20</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">arg</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">arg</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">arg</span><span class="p">)))</span> <span class="p">{</span><span class="nx">arg</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">arg</span><span class="p">);}</span>
        <span class="nx">args</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span>
        <span class="nx">len</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">len</span><span class="p">,</span> <span class="nx">arg</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">tup</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="nx">tup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]);}</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">tup</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">stub1_seq</span><span class="p">,</span> <span class="nx">stub2_itr</span><span class="p">,</span> <span class="nx">stub3_tgt</span><span class="p">;</span>
<span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nx">_pyfunc_zip</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">);</span>
<span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">stub1_seq</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">)))</span> <span class="p">{</span>
    <span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">stub2_itr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">&lt;</span> <span class="nx">stub1_seq</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">stub3_tgt</span> <span class="o">=</span> <span class="nx">stub1_seq</span><span class="p">[</span><span class="nx">stub2_itr</span><span class="p">];</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="nx">stub3_tgt</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">stub3_tgt</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">foo</span><span class="p">)):</span>
    <span class="k">pass</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_reversed</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">iter</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter</span><span class="p">);}</span>
    <span class="k">return</span> <span class="nx">iter</span><span class="p">.</span><span class="nx">slice</span><span class="p">().</span><span class="nx">reverse</span><span class="p">();</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_sorted</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">iter</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">reverse</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1 2 3</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter</span><span class="p">);}</span>
    <span class="kd">var</span> <span class="nx">comp</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">key</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">key</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;}</span> <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="mi">1</span><span class="p">;}</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;};</span>
    <span class="nx">comp</span> <span class="o">=</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">?</span> <span class="nx">comp</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span> 
    <span class="nx">iter</span> <span class="o">=</span> <span class="nx">iter</span><span class="p">.</span><span class="nx">slice</span><span class="p">().</span><span class="nx">sort</span><span class="p">(</span><span class="nx">comp</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">reverse</span><span class="p">)</span> <span class="nx">iter</span><span class="p">.</span><span class="nx">reverse</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">iter</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">stub1_seq</span><span class="p">,</span> <span class="nx">stub2_itr</span><span class="p">,</span> <span class="nx">x</span><span class="p">;</span>
<span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nx">_pyfunc_reversed</span><span class="p">(</span><span class="nx">_pyfunc_sorted</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">false</span><span class="p">));</span>
<span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">stub1_seq</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">)))</span> <span class="p">{</span>
    <span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">stub2_itr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">&lt;</span> <span class="nx">stub1_seq</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">x</span> <span class="o">=</span> <span class="nx">stub1_seq</span><span class="p">[</span><span class="nx">stub2_itr</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">foo</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_map</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">func</span><span class="p">,</span> <span class="nx">iter</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">func</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">||</span> <span class="nx">func</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span><span class="nx">func</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">x</span><span class="p">;}}</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter</span><span class="p">);}</span>
    <span class="k">return</span> <span class="nx">iter</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">func</span><span class="p">);</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">stub1_seq</span><span class="p">,</span> <span class="nx">stub2_itr</span><span class="p">,</span> <span class="nx">x</span><span class="p">;</span>
<span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nx">_pyfunc_map</span><span class="p">((</span><span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;}),</span> <span class="nx">foo</span><span class="p">);</span>
<span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">stub1_seq</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">)))</span> <span class="p">{</span>
    <span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">stub2_itr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">&lt;</span> <span class="nx">stub1_seq</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">x</span> <span class="o">=</span> <span class="nx">stub1_seq</span><span class="p">[</span><span class="nx">stub2_itr</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">,</span> <span class="n">foo</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_filter</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">func</span><span class="p">,</span> <span class="nx">iter</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">func</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">||</span> <span class="nx">func</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span><span class="nx">func</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">x</span><span class="p">;}}</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter</span><span class="p">);}</span>
    <span class="k">return</span> <span class="nx">iter</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">func</span><span class="p">);</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">stub1_seq</span><span class="p">,</span> <span class="nx">stub2_itr</span><span class="p">,</span> <span class="nx">x</span><span class="p">;</span>
<span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nx">_pyfunc_filter</span><span class="p">((</span><span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;}),</span> <span class="nx">foo</span><span class="p">);</span>
<span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">stub1_seq</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">)))</span> <span class="p">{</span>
    <span class="nx">stub1_seq</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">stub1_seq</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">stub2_itr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">&lt;</span> <span class="nx">stub1_seq</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">stub2_itr</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">x</span> <span class="o">=</span> <span class="nx">stub1_seq</span><span class="p">[</span><span class="nx">stub2_itr</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="comprehensions">
<h2>Comprehensions<a class="headerlink" href="#comprehensions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># List comprehensions just work</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">some_array</span> <span class="k">if</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">b</span><span class="p">]</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_op_mult</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">String</span><span class="p">)</span> <span class="k">return</span> <span class="nx">_pymeth_repeat</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">String</span><span class="p">)</span> <span class="k">return</span> <span class="nx">_pymeth_repeat</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span><span class="kd">var</span> <span class="nx">t</span><span class="o">=</span><span class="nx">a</span><span class="p">;</span> <span class="nx">a</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span> <span class="nx">b</span><span class="o">=</span><span class="nx">t</span><span class="p">;}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">[];</span> <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pymeth_repeat</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">count</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 0</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">repeat</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">repeat</span><span class="p">(</span><span class="nx">count</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">pattern</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">();</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">result</span> <span class="o">+=</span> <span class="nx">pattern</span><span class="p">;</span>
        <span class="nx">count</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">pattern</span> <span class="o">+=</span> <span class="nx">pattern</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">result</span> <span class="o">+</span> <span class="nx">pattern</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">;</span>
<span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="nx">list_comprehension</span> <span class="p">()</span> <span class="p">{</span><span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">[];</span><span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">iter0</span><span class="p">,</span> <span class="nx">i0</span><span class="p">;</span><span class="nx">iter0</span> <span class="o">=</span> <span class="nx">some_array</span><span class="p">;</span><span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter0</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter0</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter0</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter0</span><span class="p">);}</span><span class="k">for</span> <span class="p">(</span><span class="nx">i0</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i0</span><span class="o">&lt;</span><span class="nx">iter0</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i0</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">iter0</span><span class="p">[</span><span class="nx">i0</span><span class="p">];</span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">((</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)))</span> <span class="p">{</span><span class="k">continue</span><span class="p">;}{</span><span class="nx">res</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">_pyfunc_op_mult</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">));}}</span><span class="k">return</span> <span class="nx">res</span><span class="p">;}).</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="nx">list_comprehension</span> <span class="p">()</span> <span class="p">{</span><span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">[];</span><span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">iter0</span><span class="p">,</span> <span class="nx">i0</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">iter1</span><span class="p">,</span> <span class="nx">i1</span><span class="p">;</span><span class="nx">iter0</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span><span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter0</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter0</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter0</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter0</span><span class="p">);}</span><span class="k">for</span> <span class="p">(</span><span class="nx">i0</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i0</span><span class="o">&lt;</span><span class="nx">iter0</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i0</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">iter0</span><span class="p">[</span><span class="nx">i0</span><span class="p">];</span><span class="nx">iter1</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span><span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter1</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter1</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter1</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter1</span><span class="p">);}</span><span class="k">for</span> <span class="p">(</span><span class="nx">i1</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i1</span><span class="o">&lt;</span><span class="nx">iter1</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i1</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="nx">j</span> <span class="o">=</span> <span class="nx">iter1</span><span class="p">[</span><span class="nx">i1</span><span class="p">];{</span><span class="nx">res</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">_pyfunc_op_mult</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">));}}}</span><span class="k">return</span> <span class="nx">res</span><span class="p">;}).</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="defining-functions">
<h2>Defining functions<a class="headerlink" href="#defining-functions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">display</span><span class="p">;</span>
<span class="nx">display</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">flx_display</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Support for *args</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">values</span><span class="p">):</span>
    <span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>
<span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">flx_foo</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">values</span><span class="p">;</span>
    <span class="nx">values</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="nx">bar</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">[].</span><span class="nx">concat</span><span class="p">([</span><span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">values</span><span class="p">));</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># To write the function in raw JS, use the RawJS call</span>
<span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="n">RawJS</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    var c = 4;</span>
<span class="s1">    return a + b + c;</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">bar</span><span class="p">;</span>
<span class="nx">bar</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">flx_bar</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">+</span> <span class="nx">c</span><span class="p">;</span>
    <span class="p">;</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Lambda expressions</span>
<span class="n">foo</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>
<span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">);};</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="defining-classes">
<h2>Defining classes<a class="headerlink" href="#defining-classes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Classes are translated to the JavaScript prototypal class paragigm,
which means that they should play well with other JS libraries and e.g.
<cite>instanceof</cite>. Inheritance is supported, but not multiple inheritance.
Further, <cite>super()</cite> works just as in Python 3.</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="n">a_class_attribute</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_op_instantiate</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ob</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">ob</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="o">||</span>
            <span class="p">(</span><span class="k">typeof</span> <span class="nb">window</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span> <span class="o">===</span> <span class="nx">ob</span><span class="p">)</span> <span class="o">||</span>
            <span class="p">(</span><span class="k">typeof</span> <span class="nx">global</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">global</span> <span class="o">===</span> <span class="nx">ob</span><span class="p">))</span>
            <span class="p">{</span><span class="k">throw</span> <span class="s2">&quot;Class constructor is called as a function.&quot;</span><span class="p">;}</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">ob</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">Object</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span>
            <span class="k">typeof</span> <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">nobind</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">bind</span><span class="p">(</span><span class="nx">ob</span><span class="p">);</span>
            <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">__name__</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ob</span><span class="p">.</span><span class="nx">__init__</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ob</span><span class="p">.</span><span class="nx">__init__</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">ob</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">Foo</span><span class="p">;</span>
<span class="nx">Foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">_pyfunc_op_instantiate</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">Foo</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_base_class</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">;</span>
<span class="nx">Foo</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_class_name</span> <span class="o">=</span> <span class="s2">&quot;Foo&quot;</span><span class="p">;</span>

<span class="nx">Foo</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">a_class_attribute</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="nx">Foo</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">__init__</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="n">Foo</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">def</span> <span class="nf">add1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_op_add</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_op_instantiate</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ob</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">ob</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="o">||</span>
            <span class="p">(</span><span class="k">typeof</span> <span class="nb">window</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span> <span class="o">===</span> <span class="nx">ob</span><span class="p">)</span> <span class="o">||</span>
            <span class="p">(</span><span class="k">typeof</span> <span class="nx">global</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">global</span> <span class="o">===</span> <span class="nx">ob</span><span class="p">))</span>
            <span class="p">{</span><span class="k">throw</span> <span class="s2">&quot;Class constructor is called as a function.&quot;</span><span class="p">;}</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">ob</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">Object</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span>
            <span class="k">typeof</span> <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">nobind</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">bind</span><span class="p">(</span><span class="nx">ob</span><span class="p">);</span>
            <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">__name__</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ob</span><span class="p">.</span><span class="nx">__init__</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ob</span><span class="p">.</span><span class="nx">__init__</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">ob</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">Bar</span><span class="p">;</span>
<span class="nx">Bar</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">_pyfunc_op_instantiate</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">Bar</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Foo</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="nx">Bar</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_base_class</span> <span class="o">=</span> <span class="nx">Foo</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>
<span class="nx">Bar</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_class_name</span> <span class="o">=</span> <span class="s2">&quot;Bar&quot;</span><span class="p">;</span>

<span class="nx">Bar</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">__init__</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">.</span><span class="nx">__init__</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="o">=</span><span class="nx">_pyfunc_op_add</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Bar</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">add1</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="o">=</span><span class="nx">_pyfunc_op_add</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Methods are bound functions, like in Python</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">()</span>
<span class="n">setTimeout</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">add1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">b</span><span class="p">;</span>
<span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Bar</span><span class="p">();</span>
<span class="nx">setTimeout</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">add1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Functions defined in methods (and that do not start with self or this)</span>
<span class="c1"># have ``this`` bound the the same object.</span>
<span class="k">class</span> <span class="nc">Spam</span><span class="p">(</span><span class="n">Bar</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">add_later</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">setTimeout</span><span class="p">(</span><span class="k">lambda</span> <span class="n">ev</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">add1</span><span class="p">(),</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_op_instantiate</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ob</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">ob</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="o">||</span>
            <span class="p">(</span><span class="k">typeof</span> <span class="nb">window</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span> <span class="o">===</span> <span class="nx">ob</span><span class="p">)</span> <span class="o">||</span>
            <span class="p">(</span><span class="k">typeof</span> <span class="nx">global</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">global</span> <span class="o">===</span> <span class="nx">ob</span><span class="p">))</span>
            <span class="p">{</span><span class="k">throw</span> <span class="s2">&quot;Class constructor is called as a function.&quot;</span><span class="p">;}</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">ob</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">Object</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span>
            <span class="k">typeof</span> <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">nobind</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">bind</span><span class="p">(</span><span class="nx">ob</span><span class="p">);</span>
            <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">__name__</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ob</span><span class="p">.</span><span class="nx">__init__</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ob</span><span class="p">.</span><span class="nx">__init__</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">ob</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">Spam</span><span class="p">;</span>
<span class="nx">Spam</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">_pyfunc_op_instantiate</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">Spam</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Bar</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="nx">Spam</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_base_class</span> <span class="o">=</span> <span class="nx">Bar</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>
<span class="nx">Spam</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_class_name</span> <span class="o">=</span> <span class="s2">&quot;Spam&quot;</span><span class="p">;</span>

<span class="nx">Spam</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">add_later</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">((</span><span class="kd">function</span> <span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">add1</span><span class="p">();}).</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Raised exceptions are translated to a JavaScript Error objects, for
which the <code class="docutils literal"><span class="pre">name</span></code> attribute is set to the type of the exception being
raised. When catching exceptions the name attribute is checked (if its
an Error object. You can raise strings or any other kind of object, but
you can only catch Error objects.</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Throwing/raising exceptions</span>
<span class="k">raise</span> <span class="n">SomeError</span><span class="p">(</span><span class="s1">&#39;asd&#39;</span><span class="p">)</span>
<span class="k">raise</span> <span class="n">AnotherError</span><span class="p">()</span>
<span class="k">raise</span> <span class="s2">&quot;In JS you can throw anything&quot;</span>
<span class="k">raise</span> <span class="mi">4</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">err_0</span><span class="p">;</span>
<span class="nx">err_0</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;SomeError:&#39;</span> <span class="o">+</span> <span class="s2">&quot;asd&quot;</span><span class="p">);</span> <span class="nx">err_0</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;SomeError&quot;</span><span class="p">;</span> <span class="k">throw</span> <span class="nx">err_0</span><span class="p">;</span>
<span class="nx">err_0</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;AnotherError:&#39;</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">);</span> <span class="nx">err_0</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;AnotherError&quot;</span><span class="p">;</span> <span class="k">throw</span> <span class="nx">err_0</span><span class="p">;</span>
<span class="k">throw</span> <span class="s2">&quot;In JS you can throw anything&quot;</span><span class="p">;</span>
<span class="k">throw</span> <span class="mi">4</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Assertions work too</span>
<span class="k">assert</span> <span class="n">foo</span> <span class="o">==</span> <span class="mi">3</span>
<span class="k">assert</span> <span class="n">bar</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;bar should be 4&quot;</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_op_equals</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">op_equals</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">b</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">iseq</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span><span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">;}</span>
        <span class="k">return</span> <span class="nx">iseq</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Object</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">akeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="nx">bkeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
        <span class="nx">akeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span> <span class="nx">bkeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">akeys</span><span class="p">,</span> <span class="nx">bkeys</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">iseq</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">akeys</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
            <span class="p">{</span><span class="nx">k</span><span class="o">=</span><span class="nx">akeys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">k</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">k</span><span class="p">]);</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">;}</span>
        <span class="k">return</span> <span class="nx">iseq</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">_pyfunc_op_equals</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span> <span class="p">{</span><span class="k">throw</span> <span class="s2">&quot;AssertionError: &quot;</span> <span class="o">+</span> <span class="s2">&quot;_pyfunc_op_equals(foo, 3)&quot;</span><span class="p">;}</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">_pyfunc_op_equals</span><span class="p">(</span><span class="nx">bar</span><span class="p">,</span> <span class="mi">4</span><span class="p">)))</span> <span class="p">{</span><span class="k">throw</span> <span class="s2">&quot;AssertionError: &quot;</span> <span class="o">+</span> <span class="s2">&quot;\&quot;bar should be 4\&quot;&quot;</span><span class="p">;}</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Catching exceptions</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;blabla&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
   <span class="k">print</span><span class="p">(</span><span class="s1">&#39;something went wrong&#39;</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">err</span><span class="p">,</span> <span class="nx">err_1</span><span class="p">;</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nx">err_1</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;IndexError:&#39;</span> <span class="o">+</span> <span class="s2">&quot;blabla&quot;</span><span class="p">);</span> <span class="nx">err_1</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;IndexError&quot;</span><span class="p">;</span> <span class="k">throw</span> <span class="nx">err_1</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">err_1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err_1</span> <span class="k">instanceof</span> <span class="nb">Error</span> <span class="o">&amp;&amp;</span> <span class="nx">err_1</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;IndexError&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">err</span> <span class="o">=</span> <span class="nx">err_1</span><span class="p">;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;something went wrong&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="globals-and-nonlocal">
<h2>Globals and nonlocal<a class="headerlink" href="#globals-and-nonlocal" title="このヘッドラインへのパーマリンク">¶</a></h2>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">a</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">foo</span><span class="p">()</span>
<span class="c1"># a is now 4</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">foo</span><span class="p">;</span>
<span class="nx">a</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">flx_foo</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">foo</span><span class="p">();</span>
</pre></div>
</div> </div></td></tr></table></div>
<span class="target" id="module-flexx.pyscript.parser3"></span><div class="section" id="python-builtins">
<h2>Python Builtins<a class="headerlink" href="#python-builtins" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Most buildin functions (that make sense in JS) are automatically
translated to JavaScript: isinstance, issubclass, callable, hasattr,
getattr, setattr, delattr, print, len, max, min, chr, ord, dict, list,
tuple, range, pow, sum, round, int, float, str, bool, abs, divmod, all,
any, enumerate, zip, reversed, sorted, filter, map.</p>
<p>Further all methods for list, dict and str are implemented (except str
methods: encode, decode, format, format_map, isdecimal, isdigit,
isprintable, maketrans).</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># &quot;self&quot; is replaced with &quot;this&quot;</span>
<span class="bp">self</span><span class="o">.</span><span class="n">foo</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Printing just works</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;some test&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;some test&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">c</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Getting the length of a string or array</span>
<span class="nb">len</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nx">foo</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Rounding and abs</span>
<span class="nb">round</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>  <span class="c1"># round to nearest integer</span>
<span class="nb">int</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>  <span class="c1"># round towards 0 as in Python</span>
<span class="nb">abs</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_abs</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">_pyfunc_int</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1</span>
    <span class="k">return</span> <span class="nx">x</span><span class="o">&lt;</span><span class="mi">0</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_round</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">;</span>
<span class="nx">_pyfunc_round</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
<span class="nx">_pyfunc_int</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
<span class="nx">_pyfunc_abs</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># min and max</span>
<span class="nb">min</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="nb">min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="nb">max</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="nb">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">foo</span><span class="p">);</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">foo</span><span class="p">);</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># divmod</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>  <span class="c1"># -&gt; 14, 2</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_divmod</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">%</span> <span class="nx">y</span><span class="p">;</span> <span class="k">return</span> <span class="p">[(</span><span class="nx">x</span><span class="o">-</span><span class="nx">m</span><span class="p">)</span><span class="o">/</span><span class="nx">y</span><span class="p">,</span> <span class="nx">m</span><span class="p">];</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">stub1_</span><span class="p">;</span>
<span class="nx">stub1_</span> <span class="o">=</span> <span class="nx">_pyfunc_divmod</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
<span class="nx">a</span> <span class="o">=</span> <span class="nx">stub1_</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">stub1_</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Aggregation</span>
<span class="nb">sum</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="nb">all</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="nb">any</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_all</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">_pyfunc_truthy</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="nx">i</span><span class="p">])){</span><span class="k">return</span> <span class="kc">false</span><span class="p">;}</span>
    <span class="p">}</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_any</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">_pyfunc_truthy</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="nx">i</span><span class="p">])){</span><span class="k">return</span> <span class="kc">true</span><span class="p">;}</span>
    <span class="p">}</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_sum</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// nargs: 1</span>
    <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;});</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_truthy</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">v</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">byteLength</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">byteLength</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">!==</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="kc">true</span><span class="p">;}</span>
    <span class="k">else</span> <span class="p">{</span><span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">v</span><span class="p">).</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
<span class="p">};</span>
<span class="nx">_pyfunc_sum</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
<span class="nx">_pyfunc_all</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
<span class="nx">_pyfunc_any</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Turning things into numbers, bools and strings</span>
<span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="nb">bool</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>  <span class="c1"># this rounds towards zero like in Python</span>
<span class="nb">chr</span><span class="p">(</span><span class="mi">65</span><span class="p">)</span>  <span class="c1"># -&gt; &#39;A&#39;</span>
<span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>  <span class="c1"># -&gt; 65</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_bool</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1</span>
    <span class="k">return</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">_pyfunc_truthy</span><span class="p">(</span><span class="nx">x</span><span class="p">));</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_float</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">_pyfunc_int</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1</span>
    <span class="k">return</span> <span class="nx">x</span><span class="o">&lt;</span><span class="mi">0</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_str</span> <span class="o">=</span> <span class="nb">String</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">_pyfunc_truthy</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">v</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">byteLength</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">byteLength</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">!==</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="kc">true</span><span class="p">;}</span>
    <span class="k">else</span> <span class="p">{</span><span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">v</span><span class="p">).</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;}</span>
<span class="p">};</span>
<span class="nx">_pyfunc_str</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
<span class="nx">_pyfunc_float</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
<span class="nx">_pyfunc_bool</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>
<span class="nx">_pyfunc_int</span><span class="p">(</span><span class="nx">z</span><span class="p">);</span>
<span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">65</span><span class="p">);</span>
<span class="s2">&quot;A&quot;</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Turning things into lists and dicts</span>
<span class="nb">dict</span><span class="p">([[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>  <span class="c1"># -&gt; {&#39;foo&#39;: 1, &#39;bar&#39;: 2}</span>
<span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>  <span class="c1"># -&gt; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>
<span class="nb">dict</span><span class="p">(</span><span class="n">other_dict</span><span class="p">)</span>  <span class="c1"># make a copy</span>
<span class="nb">list</span><span class="p">(</span><span class="n">other_list</span><span class="p">)</span>  <span class="c1"># make copy</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_dict</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">keys</span><span class="p">,</span> <span class="nx">r</span><span class="o">=</span><span class="p">{};</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">t</span><span class="o">=</span><span class="nx">x</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">r</span><span class="p">[</span><span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">t</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">keys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">keys</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">t</span><span class="o">=</span><span class="nx">keys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">r</span><span class="p">[</span><span class="nx">t</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="nx">t</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">r</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_list</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="p">[];</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">x</span><span class="o">===</span><span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span> <span class="p">{</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">x</span><span class="p">)}</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">r</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">r</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">_pyfunc_dict</span><span class="p">(([[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]));</span>
<span class="nx">_pyfunc_list</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">);</span>
<span class="nx">_pyfunc_dict</span><span class="p">(</span><span class="nx">other_dict</span><span class="p">);</span>
<span class="nx">_pyfunc_list</span><span class="p">(</span><span class="nx">other_list</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="the-isinstance-function-and-friends">
<h2>The isinstance function (and friends)<a class="headerlink" href="#the-isinstance-function-and-friends" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">isinstance()</span></code> function works for all JS primitive types, but also
for user-defined classes.</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Basic types</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>  <span class="c1"># in JS there are no ints</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">([],</span> <span class="nb">list</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">({},</span> <span class="nb">dict</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">FunctionType</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="p">({}).</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s([a-zA-Z]+)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span><span class="p">;</span>
<span class="p">({}).</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s([a-zA-Z]+)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">;</span>
<span class="p">({}).</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">([]).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s([a-zA-Z]+)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;array&#39;</span><span class="p">;</span>
<span class="p">({}).</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">({}).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s([a-zA-Z]+)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span><span class="p">;</span>
<span class="p">({}).</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">foo</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s([a-zA-Z]+)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Can also use JS strings</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">([],</span> <span class="s1">&#39;array&#39;</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">({},</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="p">({}).</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s([a-zA-Z]+)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span><span class="p">;</span>
<span class="p">({}).</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s([a-zA-Z]+)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">;</span>
<span class="p">({}).</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">([]).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s([a-zA-Z]+)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;array&#39;</span><span class="p">;</span>
<span class="p">({}).</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">({}).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s([a-zA-Z]+)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span><span class="p">;</span>
<span class="p">({}).</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">foo</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s([a-zA-Z]+)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># You can use it on your own types too ...</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">MyClass</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;MyClass&#39;</span><span class="p">)</span>  <span class="c1"># equivalent</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;Object&#39;</span><span class="p">)</span>  <span class="c1"># also yields true (subclass of Object)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nx">x</span> <span class="k">instanceof</span> <span class="nx">MyClass</span><span class="p">;</span>
<span class="nx">x</span> <span class="k">instanceof</span> <span class="nx">MyClass</span><span class="p">;</span>
<span class="p">({}).</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">x</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s([a-zA-Z]+)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span><span class="p">;</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># issubclass works too</span>
<span class="nb">issubclass</span><span class="p">(</span><span class="n">Foo</span><span class="p">,</span> <span class="n">Bar</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="p">(</span><span class="nx">Foo</span><span class="p">.</span><span class="nx">prototype</span> <span class="k">instanceof</span> <span class="nx">Bar</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># As well as callable</span>
<span class="nb">callable</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="p">(</span><span class="k">typeof</span> <span class="nx">foo</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="hasattr-getattr-setattr-and-delattr">
<h2>hasattr, getattr, setattr and delattr<a class="headerlink" href="#hasattr-getattr-setattr-and-delattr" title="このヘッドラインへのパーマリンク">¶</a></h2>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">a</span><span class="p">;</span>
<span class="nx">a</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">};</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nb">hasattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>  <span class="c1"># -&gt; True</span>
<span class="nb">hasattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;fooo&#39;</span><span class="p">)</span>  <span class="c1"># -&gt; False</span>
<span class="nb">hasattr</span><span class="p">(</span><span class="n">null</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>  <span class="c1"># -&gt; False</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_hasattr</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ob</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">ob</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ob</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">_pyfunc_hasattr</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">);</span>
<span class="nx">_pyfunc_hasattr</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;fooo&quot;</span><span class="p">);</span>
<span class="nx">_pyfunc_hasattr</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nb">getattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>  <span class="c1"># -&gt; 1</span>
<span class="nb">getattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;fooo&#39;</span><span class="p">)</span>  <span class="c1"># -&gt; raise AttributeError</span>
<span class="nb">getattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;fooo&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># -&gt; 3</span>
<span class="nb">getattr</span><span class="p">(</span><span class="n">null</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># -&gt; 3</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_getattr</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ob</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">deflt</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2 3</span>
    <span class="kd">var</span> <span class="nx">has_attr</span> <span class="o">=</span> <span class="nx">ob</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">ob</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">has_attr</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">];}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">deflt</span><span class="p">;}</span>
    <span class="k">else</span> <span class="p">{</span><span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span> <span class="nx">e</span><span class="p">.</span><span class="nx">name</span><span class="o">=</span><span class="s1">&#39;AttributeError&#39;</span><span class="p">;</span> <span class="k">throw</span> <span class="nx">e</span><span class="p">;}</span>
<span class="p">};</span>
<span class="nx">_pyfunc_getattr</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">);</span>
<span class="nx">_pyfunc_getattr</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;fooo&quot;</span><span class="p">);</span>
<span class="nx">_pyfunc_getattr</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;fooo&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="nx">_pyfunc_getattr</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nb">setattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_setattr</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ob</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// nargs: 3</span>
    <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">_pyfunc_setattr</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nb">delattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_delattr</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ob</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// nargs: 2</span>
    <span class="k">delete</span> <span class="nx">ob</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
<span class="p">};</span>
<span class="nx">_pyfunc_delattr</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="creating-sequences">
<h2>Creating sequences<a class="headerlink" href="#creating-sequences" title="このヘッドラインへのパーマリンク">¶</a></h2>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_range</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="p">(</span><span class="nx">end</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="nx">step</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="nx">val</span> <span class="o">+=</span> <span class="nx">step</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">_pyfunc_range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nx">_pyfunc_range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">_pyfunc_range</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">));</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nb">reversed</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="nb">sorted</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="nb">enumerate</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="nb">zip</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_enumerate</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">iter</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1</span>
    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">res</span><span class="o">=</span><span class="p">[];</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter</span><span class="p">);}</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">iter</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">i</span><span class="p">,</span> <span class="nx">iter</span><span class="p">[</span><span class="nx">i</span><span class="p">]]);}</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_reversed</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">iter</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter</span><span class="p">);}</span>
    <span class="k">return</span> <span class="nx">iter</span><span class="p">.</span><span class="nx">slice</span><span class="p">().</span><span class="nx">reverse</span><span class="p">();</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_sorted</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">iter</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">reverse</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1 2 3</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter</span><span class="p">);}</span>
    <span class="kd">var</span> <span class="nx">comp</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">key</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">key</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;}</span> <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="mi">1</span><span class="p">;}</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;};</span>
    <span class="nx">comp</span> <span class="o">=</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">?</span> <span class="nx">comp</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span> 
    <span class="nx">iter</span> <span class="o">=</span> <span class="nx">iter</span><span class="p">.</span><span class="nx">slice</span><span class="p">().</span><span class="nx">sort</span><span class="p">(</span><span class="nx">comp</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">reverse</span><span class="p">)</span> <span class="nx">iter</span><span class="p">.</span><span class="nx">reverse</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">iter</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_zip</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="c1">// nargs: 2 3 4 5 6 7 8 9</span>
    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">tup</span><span class="p">,</span> <span class="nx">arg</span><span class="p">,</span> <span class="nx">args</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">len</span> <span class="o">=</span> <span class="mi">1</span><span class="nx">e20</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">arg</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">arg</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">arg</span><span class="p">)))</span> <span class="p">{</span><span class="nx">arg</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">arg</span><span class="p">);}</span>
        <span class="nx">args</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span>
        <span class="nx">len</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">len</span><span class="p">,</span> <span class="nx">arg</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">tup</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="nx">tup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]);}</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">tup</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">_pyfunc_reversed</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
<span class="nx">_pyfunc_sorted</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nx">_pyfunc_enumerate</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
<span class="nx">_pyfunc_zip</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="nb">filter</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">foo</span><span class="p">)</span>
<span class="nb">map</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">foo</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_filter</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">func</span><span class="p">,</span> <span class="nx">iter</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">func</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">||</span> <span class="nx">func</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span><span class="nx">func</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">x</span><span class="p">;}}</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter</span><span class="p">);}</span>
    <span class="k">return</span> <span class="nx">iter</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">func</span><span class="p">);</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pyfunc_map</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">func</span><span class="p">,</span> <span class="nx">iter</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">func</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">||</span> <span class="nx">func</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span><span class="nx">func</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">x</span><span class="p">;}}</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">iter</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">iter</span><span class="p">)))</span> <span class="p">{</span><span class="nx">iter</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">iter</span><span class="p">);}</span>
    <span class="k">return</span> <span class="nx">iter</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">func</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">_pyfunc_filter</span><span class="p">(</span><span class="nx">func</span><span class="p">,</span> <span class="nx">foo</span><span class="p">);</span>
<span class="nx">_pyfunc_map</span><span class="p">(</span><span class="nx">func</span><span class="p">,</span> <span class="nx">foo</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="list-methods">
<h2>List methods<a class="headerlink" href="#list-methods" title="このヘッドラインへのパーマリンク">¶</a></h2>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Call a.append() if it exists, otherwise a.push()</span>
<span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pymeth_append</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="k">this</span><span class="p">))</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">append</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">_pymeth_append</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="c1"># Similar for remove()</span>
<span class="n">a</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pyfunc_op_equals</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">op_equals</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">b</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">iseq</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span><span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">;}</span>
        <span class="k">return</span> <span class="nx">iseq</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Object</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">akeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="nx">bkeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
        <span class="nx">akeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span> <span class="nx">bkeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">akeys</span><span class="p">,</span> <span class="nx">bkeys</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">iseq</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">akeys</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
            <span class="p">{</span><span class="nx">k</span><span class="o">=</span><span class="nx">akeys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">iseq</span> <span class="o">=</span> <span class="nx">op_equals</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">k</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">k</span><span class="p">]);</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">;}</span>
        <span class="k">return</span> <span class="nx">iseq</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pymeth_remove</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="k">this</span><span class="p">))</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">_pyfunc_op_equals</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">x</span><span class="p">))</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="k">return</span><span class="p">;}</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="nx">e</span><span class="p">.</span><span class="nx">name</span><span class="o">=</span><span class="s1">&#39;ValueError&#39;</span><span class="p">;</span> <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">_pymeth_remove</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="dict-methods">
<h2>Dict methods<a class="headerlink" href="#dict-methods" title="このヘッドラインへのパーマリンク">¶</a></h2>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">a</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
<span class="n">a</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pymeth_get</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1 2</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">!==</span> <span class="nb">Object</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">];}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">d</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">d</span><span class="p">;}</span>
    <span class="k">else</span> <span class="p">{</span><span class="k">return</span> <span class="kc">null</span><span class="p">;}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pymeth_keys</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="c1">// nargs: 0</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="k">this</span><span class="p">[</span><span class="s1">&#39;keys&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">keys</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">a</span><span class="p">;</span>
<span class="nx">a</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">};</span>
<span class="nx">a</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">];</span>
<span class="nx">_pymeth_get</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="nx">_pymeth_get</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">);</span>
<span class="nx">_pymeth_keys</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="str-methods">
<h2>Str methods<a class="headerlink" href="#str-methods" title="このヘッドラインへのパーマリンク">¶</a></h2>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="s2">&quot;foobar&quot;</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="s2">&quot;foobar&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)</span>
<span class="s2">&quot;foobar&quot;</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">_pymeth_replace</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">s1</span><span class="p">,</span> <span class="nx">s2</span><span class="p">,</span> <span class="nx">count</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// nargs: 2 3</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">!==</span> <span class="nb">String</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">replace</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">i2</span><span class="p">,</span> <span class="nx">parts</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">count</span> <span class="o">=</span> <span class="p">(</span><span class="nx">count</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span><span class="nx">e20</span> <span class="o">:</span> <span class="nx">count</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">i2</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">s1</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">i2</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">parts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i2</span><span class="p">));</span>
            <span class="nx">parts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">s2</span><span class="p">);</span>
            <span class="nx">i</span> <span class="o">=</span> <span class="nx">i2</span> <span class="o">+</span> <span class="nx">s1</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="nx">count</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">parts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pymeth_startswith</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// nargs: 1</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">!==</span> <span class="nb">String</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">startswith</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">_pymeth_upper</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="c1">// nargs: 0</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">!==</span> <span class="nb">String</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">upper</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
<span class="p">};</span>
<span class="nx">_pymeth_startswith</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">);</span>
<span class="nx">_pymeth_replace</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">);</span>
<span class="nx">_pymeth_upper</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">);</span>
</pre></div>
</div> </div></td></tr></table></div>
<div class="section" id="using-js-specific-functionality">
<h2>Using JS specific functionality<a class="headerlink" href="#using-js-specific-functionality" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>When writing PyScript inside Python modules, we recommend that where
specific JavaScript functionality is used, that the references are
prefixed with <code class="docutils literal"><span class="pre">window.</span></code> Where <code class="docutils literal"><span class="pre">window</span></code> represents the global JS
namespace. All global JavaScript objects, functions, and variables
automatically become members of the <code class="docutils literal"><span class="pre">window</span></code> object. This helps
make it clear that the functionality is specific to JS, and also
helps static code analysis tools like flake8.</p>
<style> div.hiddenjs {overflow:hidden; font-size: small; min-width:200px; min-height:30px;} div.hiddenjs > .js {display:none} div.hiddenjs:hover > .js {display:block} div.hiddenjs:hover > .ph {display:none;} </style>
<table><tr><td style='vertical-align:top; min-width:300px;'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kn">from</span> <span class="nn">flexx.pyscript</span> <span class="kn">import</span> <span class="n">window</span>  <span class="c1"># this is a stub</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">window</span><span class="o">.</span><span class="n">Math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</td><td style='vertical-align:top;'><div class='hiddenjs'><div class='ph'>JS</div> <div class='js'><div class="highlight"><pre style='margin:2px; padding: 2px; border:0px;'><span></span><span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>
<span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">flx_foo</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">window</span><span class="p">.</span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div> </div></td></tr></table><p>Aside from <code class="docutils literal"><span class="pre">window</span></code>, <code class="docutils literal"><span class="pre">flexx.pyscript</span></code> also provides <code class="docutils literal"><span class="pre">undefined</span></code>,
<code class="docutils literal"><span class="pre">Inifinity</span></code>, and <code class="docutils literal"><span class="pre">NaN</span></code>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">PyScript quick user guide</a><ul>
<li><a class="reference internal" href="#the-basics">The basics</a></li>
<li><a class="reference internal" href="#slicing-and-subscriping">Slicing and subscriping</a></li>
<li><a class="reference internal" href="#string-formatting">String formatting</a></li>
<li><a class="reference internal" href="#assignments">Assignments</a></li>
<li><a class="reference internal" href="#comparisons">Comparisons</a></li>
<li><a class="reference internal" href="#truthy-and-falsy">Truthy and Falsy</a></li>
<li><a class="reference internal" href="#function-calls">Function calls</a></li>
<li><a class="reference internal" href="#imports">Imports</a></li>
<li><a class="reference internal" href="#if-statements">If statements</a></li>
<li><a class="reference internal" href="#looping">Looping</a></li>
<li><a class="reference internal" href="#comprehensions">Comprehensions</a></li>
<li><a class="reference internal" href="#defining-functions">Defining functions</a></li>
<li><a class="reference internal" href="#defining-classes">Defining classes</a></li>
<li><a class="reference internal" href="#exceptions">Exceptions</a></li>
<li><a class="reference internal" href="#globals-and-nonlocal">Globals and nonlocal</a></li>
<li><a class="reference internal" href="#python-builtins">Python Builtins</a></li>
<li><a class="reference internal" href="#the-isinstance-function-and-friends">The isinstance function (and friends)</a></li>
<li><a class="reference internal" href="#hasattr-getattr-setattr-and-delattr">hasattr, getattr, setattr and delattr</a></li>
<li><a class="reference internal" href="#creating-sequences">Creating sequences</a></li>
<li><a class="reference internal" href="#list-methods">List methods</a></li>
<li><a class="reference internal" href="#dict-methods">Dict methods</a></li>
<li><a class="reference internal" href="#str-methods">Str methods</a></li>
<li><a class="reference internal" href="#using-js-specific-functionality">Using JS specific functionality</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Reference for flexx.pyscript</a><ul>
      <li>Previous: <a href="api.html" title="前の章へ">PyScript API</a></li>
      <li>Next: <a href="examples.html" title="次の章へ">PyScript examples</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../sources/pyscript/guide.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="検索" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015-2017, Flexx contributors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.8</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../sources/pyscript/guide.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>